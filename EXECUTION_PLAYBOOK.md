# Sanmu AI (Phase 2) 执行作战手册 (EXECUTION_PLAYBOOK)

> **⚠️ 警告**：本手册是 Day 1 任务的**强制验收标准**。只有当所有检查项通过后，才允许启动 Day 2 的“大师脑”开发。

## 1. 建立视觉基准 (Visual Baseline)

Manus 必须锁定演示图的权威性，确保代码实现与设计图像素级一致。

### 🔴 强制指令
> "Manus，请对比 `sanmu-ai-final-handover.tar.gz` 中 `assets/screenshots` 目录下的演示图与 `yanbao-miniprogram` 中的组件渲染结果。"

### ✅ 校验逻辑
1.  **Headless Browser 渲染**：运行无头浏览器或小程序模拟器，捕捉当前代码的实时渲染画面。
2.  **像素级对比 (Pixel-match)**：将实时截图与 Demo 图进行叠加对比，差异率必须 < 1%。
3.  **Leica 风格审计**：
    *   检查 `camera-page` 是否为 95% 取景框 + 纯白圆形快门。
    *   检查 `edit-page` 是否遵循 80% 留白原则。

## 2. 核心模块代码审计 (Code Audit)

界面不仅要“长得像”，逻辑也要对齐。针对 8 大模块进行以下校对：

| 模块 | 校验动作 | 智能化加强点 (Phase 2 预埋) |
| :--- | :--- | :--- |
| **大师功能** | 检查后端接口 | 确认是否包含 `Thinking...` 动效代码，推理引擎接口是否预留。 |
| **美颜/相册** | 校验 CSS 属性 | 确保 Leica 极简风格一致性；确认“语义修图”接口能覆盖现有 29 个 UI 参数。 |
| **地图推荐** | 检查渲染逻辑 | 确认所有 POI 标注均为**简体中文**；确认意图预测弹窗的 Z-index 层级正确。 |
| **会员体系** | 匹配权限逻辑 | 确认 "Sanmu Club" 三级权限显示方案；确保智能权益分配有 UI 反馈占位。 |

## 3. 自动化校对脚本 (Automation)

Manus 必须执行以下逻辑并输出报告：

1.  **路径追踪**：找到 `sanmu_db_schema_v1.sql` 中定义的模块枚举值，并与演示图中的 8 个入口一一对应。
2.  **文案审计**：扫描所有 UI 文本。
    *   **白名单**：仅允许 `yanbao AI` 和 `Sanmu AI` 使用英文。
    *   **报错机制**：发现任何其他英文或繁体字，立即报错并修正为简体中文。
3.  **最终确认**：生成一份 **《UI 吻合度审计报告》**。如果吻合度低于 100%，列出所有差异点。

## 4. 智能化修正点 (Dynamic UI)

在 Phase 2 (Inject Soul) 中，界面将从静态变为动态。

*   **智能建议浮窗**：确认演示图中是否预留了位置。如果是“死”的，要求在保持原设计美学的前提下，注入智能化交互元素（如预测性按钮）。
*   **降级保护**：确认 **影子逻辑** 是否生效。当 AI 接口无响应时，UI 必须平滑降级到本地静态数据，严禁白屏。

---

## 🏁 最终放行标准

在启动 Day 2 开发前，必须输出：
1.  **《UI 最终对齐声明》**：确认代码生成的实时界面与 Demo 图完全一致。
2.  **《智能化接口就绪报告》**：确认 `AIContentProvider` 已接管所有硬编码数据源。
